title: "Entity Brief"
description: >
  <p><strong>Entity Brief</strong> builds a cross-document index of extracted entities (people, orgs, locations, dates)
  and produces a single HTML report with simple visuals (D3) for investigative/FOIA workflows.</p>
  <p><em>Privacy:</em> This version does not send document text, entity strings, or usage metrics outside DocumentCloud/GitHub Actions.</p>
instructions: >
  <p><strong>Tip:</strong> For best results, run DocumentCloud's entity extraction first (if your documents do not have entities yet).</p>
  <p>Optional: enable writeback to store top entity tags in DocumentCloud metadata.</p>

documents:
  - selected
  - query

categories:
  - extraction
  - analysis
  - visualization

properties:
  max_docs:
    type: number
    title: "Max documents to process"
    description: "Safety cap for query runs. Selection runs are usually <= 25 anyway."
    default: 25

  min_relevance:
    type: number
    title: "Minimum entity relevance (0.0 - 1.0)"
    description: "Higher = fewer entities, faster report. Start at 0.15."
    default: 0.15

  top_n_entities:
    type: number
    title: "Top entities to show in charts"
    description: "Controls the bar chart + connection list size."
    default: 15

  include_connections:
    type: boolean
    title: "Include top co-occurrence connections"
    description: "Shows which entities appear together across the same documents."
    default: true

  writeback_tags:
    type: boolean
    title: "Write back top entity tags to document metadata"
    description: "If enabled, stores top entity tags per doc under data.entity_brief.tags."
    default: false

  writeback_tag_limit:
    type: number
    title: "Tags per document (writeback)"
    description: "Number of top entities to tag per document when writeback is enabled."
    default: 5

  writeback_tag_prefix:
    type: string
    title: "Tag prefix (writeback)"
    description: "Prefix to add before each tag stored in data.entity_brief.tags (e.g., entity:)."
    default: "entity:"

required: []
